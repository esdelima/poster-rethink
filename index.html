<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>AR Poster (Markerless Image Tracking) — Three.js + MindAR</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; background: #000; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; overflow: hidden; }
    canvas { width: 100%; height: 100% }
    .banner { position: fixed; top: 8px; left: 50%; transform: translateX(-50%); background: rgba(20,20,20,.7); color: #fff; padding: 8px 12px; border-radius: 999px; font-size: 12px; backdrop-filter: blur(6px); z-index: 10; }
    .hint { position: fixed; top: 44px; left: 50%; transform: translateX(-50%); color: #fff; opacity: .8; font-size: 12px; z-index: 10; }
  </style>
  <!-- MindAR + Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.165/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image.prod.js"></script>
</head>
<body>
  <div class="banner">MindAR Image Tracking • Three.js</div>
  <div class="hint">Poster rasio 4:5 • Target inline di HTML</div>

  <!-- Inline target.mind (base64) -->
  <script id="mind-target" type="application/mindar">
    {"inputWidth":640,"inputHeight":640,"dpi":160,"targets":[{"name":"poster","image":"https://iili.io/Fmi7QKg.jpg"}]}
  </script>

  <script type="module">
    const start = async () => {
      const targetData = document.getElementById("mind-target").textContent;
      const blob = new Blob([targetData], {type: "application/json"});
      const targetUrl = URL.createObjectURL(blob);

      const mindarThree = new window.MINDAR.IMAGE.MindARThree({
        container: document.body,
        imageTargetSrc: targetUrl, // target inline
      });

      const {renderer, scene, camera} = mindarThree;

      const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);
      scene.add(light);

      const anchor = mindarThree.addAnchor(0);

      const posterWidth = 0.6; // meter
      const posterHeight = posterWidth * 1.25;

      const textureLoader = new THREE.TextureLoader();
      const posterTex = textureLoader.load("https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Fronalpstock_big.jpg/800px-Fronalpstock_big.jpg");
      const posterPlane = new THREE.Mesh(
        new THREE.PlaneGeometry(posterWidth, posterHeight),
        new THREE.MeshBasicMaterial({map: posterTex, transparent: true})
      );

      anchor.group.add(posterPlane);

      const infoTex = textureLoader.load("https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/512px-Google_2015_logo.svg.png");
      const infoW = posterWidth * 0.6;
      const infoPlane = new THREE.Mesh(
        new THREE.PlaneGeometry(infoW, infoW*0.4),
        new THREE.MeshBasicMaterial({map: infoTex, transparent: true})
      );
      infoPlane.position.set(0, posterHeight*0.35, 0.01);
      anchor.group.add(infoPlane);

      await mindarThree.start();
      renderer.setAnimationLoop(() => {
        renderer.render(scene, camera);
      });
    }

    start();
  </script>

  <!-- Catatan:
    - Sekarang target dimasukkan inline (JSON) di dalam HTML, jadi cukup 1 file.
    - Ganti URL gambar di script id="mind-target" dengan poster kamu.
  -->
</body>
</html>
