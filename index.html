<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <title>AR Business Card - Image Tracking (NFT) Demo</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- AR.js A-Frame build (mendukung NFT/image tracking) -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.4/aframe/build/aframe-ar-nft.js"></script>

  <style>
    body { margin: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .hint {
      position: fixed; left: 10px; top: 10px;
      background: rgba(0,0,0,0.6); color: white; padding: 8px 10px; border-radius: 8px;
      font-size: 13px; z-index: 10;
    }
    .fallback {
      position: fixed; left: 10px; bottom: 10px;
      background: rgba(255,255,255,0.95); color:#111; padding:8px 10px; border-radius:8px; z-index: 10;
      font-size:13px;
    }
    .btn {
      display:inline-block; padding:6px 10px; border-radius:6px; background:#0366d6; color:#fff; text-decoration:none; font-weight:600;
    }
  </style>
</head>
<body>
  <div class="hint">Arahkan kamera ke gambar kartu (marker). Jika belum ada file target, lihat instruksi di README di bawah.</div>

  <!-- fallback UI jika tidak ada marker -->
  <div class="fallback" id="fallback">
    Jika AR tidak mendeteksi target, <a class="btn" id="show-sim">Tampilkan demo tanpa marker</a>
  </div>

  <!-- A-Frame scene with AR.js (NFT) -->
  <a-scene
    embedded
    vr-mode-ui="enabled: false"
    renderer="antialias: true; alpha: true;"
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;">
    
    <!-- Kamera -->
    <a-entity camera></a-entity>

    <!-- NFT marker: ubah url ke folder yang berisi card.iset, card.fset, card.fset3 -->
    <!-- Nama 'card' adalah contoh; jika kamu generate file dengan nama lain, ganti 'card' -->
    <a-marker type="nft" url="assets/card/card">
      <!-- Group konten yang muncul saat marker terdeteksi -->
      <a-entity id="overlay" position="0 0 0">
        <!-- Background plane (sedikit transparan) -->
        <a-plane position="0 0 0" rotation="-90 0 0" width="1.6" height="0.9" material="color: #ffffff; opacity: 0.95"></a-plane>

        <!-- Menampilkan 5 gambar data yang kamu kirim (posisi & ukuran bisa disesuaikan) -->
        <!-- Gambar 1 -->
        <a-plane position="-0.7 0.02 0.01" rotation="-90 0 0" width="0.7" height="0.28" material="shader: flat; src: https://iili.io/FmPOlgR.png"></a-plane>

        <!-- Gambar 2 -->
        <a-plane position="0 0.02 0.01" rotation="-90 0 0" width="0.7" height="0.28" material="shader: flat; src: https://iili.io/FmPOc0v.png"></a-plane>

        <!-- Gambar 3 -->
        <a-plane position="-0.7 -0.32 0.01" rotation="-90 0 0" width="0.7" height="0.28" material="shader: flat; src: https://iili.io/FmPO7sa.png"></a-plane>

        <!-- Gambar 4 -->
        <a-plane position="0 -0.32 0.01" rotation="-90 0 0" width="0.7" height="0.28" material="shader: flat; src: https://iili.io/FmPO5Wg.png"></a-plane>

        <!-- Gambar 5 (misal logo atau summary) -->
        <a-plane position="0 0.42 0.01" rotation="-90 0 0" width="1.4" height="0.2" material="shader: flat; src: https://iili.io/FmPO1Jp.png"></a-plane>

        <!-- Tombol CTA (klik 3D dengan cursor atau fallback klik layar) -->
        <a-plane id="cta-plane" position="0 0.9 0" rotation="-90 0 0" width="0.6" height="0.18" material="color:#0366d6; opacity:0.95" class="clickable">
          <a-entity position="0 0 0.01" text="value: Lihat detail; color: #fff; align: center; width: 3; baseline: middle;"></a-entity>
        </a-plane>
      </a-entity>
    </a-marker>

    <!-- lighting agar tampilan 3D lebih enak -->
    <a-entity light="type: ambient; color: #BBB"></a-entity>
    <a-entity light="type: directional; intensity: 0.6" position="0 1 0"></a-entity>
  </a-scene>

  <script>
    // Klik CTA: buka link / modal. Gunakan raycaster untuk klik objek 3D (sederhana: global click fallback)
    document.getElementById('cta-plane').addEventListener('click', function () {
      window.open('https://example.com', '_blank');
    });

    // Fallback: tombol untuk menunjukkan demo tanpa marker (berguna saat belum buat NFT)
    document.getElementById('show-sim').addEventListener('click', function () {
      // Pindahkan overlay ke depan kamera supaya terlihat walau tanpa marker
      var overlay = document.getElementById('overlay');
      if (!overlay) return;
      // set position relatif ke camera
      overlay.setAttribute('position', '0 0 -1.2');
      overlay.setAttribute('rotation', '0 0 0');
      // sembunyikan pesan fallback agar tidak menghalangi
      document.getElementById('fallback').style.display = 'none';
      alert('Demo tanpa marker aktif â€” pindahkan layar untuk melihat overlay. Ingat: ini hanya fallback, untuk deteksi nyata silakan generate NFT target dan letakkan di assets/card/');
    });
  </script>
</body>
</html>
