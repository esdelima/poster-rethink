<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>AR Web — 5 Informasi Futuristik</title>
  <!-- A-Frame + AR.js -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.3.2/aframe/build/aframe-ar.js"></script>
  <style>
    body { margin:0; font-family: system-ui, -apple-system, Roboto, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .hint { position:fixed; left:10px; top:10px; background:rgba(0,0,0,0.6); color:#fff; padding:8px 12px; border-radius:8px; z-index:999; font-size:14px }
    .fallback { display:none; padding:16px; }
    .card { background: rgba(255,255,255,0.95); border-radius:10px; padding:12px; box-shadow: 0 6px 18px rgba(0,0,0,0.12); }
    .title { font-weight:700; margin-bottom:6px }
    .small { font-size:13px; color:#333 }
    a{ color:#0b84ff }
  </style>
</head>
<body>
  <div class="hint">Arahkan kamera ke marker. (Marker image: https://iili.io/Fmi7QKg.jpg)</div>

  <!-- Fallback view for desktop / preview -->
  <div id="preview" class="fallback" style="display:block;">
    <h3 style="margin:0 0 8px 0">Preview: Informasi Futuristik</h3>
    <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-start">
      <div class="card" style="width:220px">
        <div class="title">1. Kota Terapung</div>
        <div class="small">Kota modular terapung yang menyesuaikan diri pada permukaan laut, lengkap dengan pertanian vertikal dan jaringan energi terbarukan.</div>
      </div>
      <div class="card" style="width:220px">
        <div class="title">2. Transportasi Holografik</div>
        <div class="small">Sistem transit berbasis rute holografis untuk navigasi pejalan kaki & drone yang meminimalkan kecelakaan dan kemacetan.</div>
      </div>
      <div class="card" style="width:220px">
        <div class="title">3. Antarmuka Otak-Komputer</div>
        <div class="small">Implan non-invasif yang memungkinkan interaksi digital langsung — membaca niat untuk mengetik, menelusur, dan mengontrol perangkat.</div>
      </div>
      <div class="card" style="width:220px">
        <div class="title">4. Energi Fusion Mini</div>
        <div class="small">Generator fusi skala kecil untuk komunitas kota, memberi listrik bersih dan aman tanpa emisi karbon.</div>
      </div>
      <div class="card" style="width:220px">
        <div class="title">5. Ekosistem AI Kesehatan Pribadi</div>
        <div class="small">Agen AI yang memantau biometrik real-time, memberikan pencegahan kesehatan proaktif dan perencanaan pengobatan personal.</div>
      </div>
    </div>
    <p style="margin-top:12px;color:#555">Untuk pengalaman AR: download marker image dari <a href="https://iili.io/Fmi7QKg.jpg" target="_blank">https://iili.io/Fmi7QKg.jpg</a> dan konversi ke file <code>marker.patt</code> menggunakan <em>pattern-marker generator</em> (mis. tool AR.js 또는 generator online). Letakkan <code>marker.patt</code> di folder yang sama dengan file ini lalu buka file melalui server lokal (mis. <code>npx http-server</code> atau live-server) karena akses webcam biasanya dibatasi lewat <code>file://</code>.</p>
  </div>

  <!-- A-Frame AR scene -->
  <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>

    <!-- NOTE: AR.js default pattern marker requires a .patt file (marker.patt).
         Convert your marker image (https://iili.io/Fmi7QKg.jpg) to marker.patt and put it
         next to this HTML file. If you already have marker.patt, uncomment the marker below.
    -->

    <!-- Example marker entity (uncomment after you have marker.patt in same folder) -->
    <!-- <a-marker type="pattern" url="marker.patt">
      <a-entity id="cards" position="0 0 0">
        <!-- Five info cards arranged in semicircle above marker -->
        <a-entity position="0 0.02 0">
          <a-entity geometry="primitive: plane; height:0.25; width:0.6" material="color: #ffffff; opacity: 0.95" position="0 0.15 0" rotation="-90 0 0" ></a-entity>
        </a-entity>
      </a-entity>
    </a-marker> -->

    <!-- Simple alternative: use a flat plane that appears in front of camera when no marker.patt provided -> useful for testing -->
    <a-entity id="virtual-info" visible="true" position="0 0 -1.5">
      <!-- We'll render five small panels as 2D planes -->
      <a-entity id="panelGroup" position="0 0 -1">
        <!-- Card 1 -->
        <a-plane position="-0.9 0.45 -2" rotation="0 0 0" width="0.7" height="0.38" material="shader: flat; src: #card1Tex"></a-plane>
        <!-- Card 2 -->
        <a-plane position="-0.3 0.45 -2" rotation="0 0 0" width="0.7" height="0.38" material="shader: flat; src: #card2Tex"></a-plane>
        <!-- Card 3 -->
        <a-plane position="0.3 0.45 -2" rotation="0 0 0" width="0.7" height="0.38" material="shader: flat; src: #card3Tex"></a-plane>
        <!-- Card 4 -->
        <a-plane position="0.9 0.45 -2" rotation="0 0 0" width="0.7" height="0.38" material="shader: flat; src: #card4Tex"></a-plane>
        <!-- Card 5 -->
        <a-plane position="0  -0.12 -2" rotation="0 0 0" width="1.6" height="0.5" material="shader: flat; src: #card5Tex"></a-plane>
      </a-entity>
    </a-entity>

    <!-- Textures for the fallback cards (generated from canvas below) -->
    <a-assets>
      <canvas id="card1" width="1024" height="512"></canvas>
      <canvas id="card2" width="1024" height="512"></canvas>
      <canvas id="card3" width="1024" height="512"></canvas>
      <canvas id="card4" width="1024" height="512"></canvas>
      <canvas id="card5" width="1400" height="512"></canvas>

      <img id="markerImg" src="https://iili.io/Fmi7QKg.jpg" crossorigin="anonymous" />
    </a-assets>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Draw the five cards onto canvases to use as textures in A-Frame fallback view
    const cards = [
      {id:'card1', title:'1. Kota Terapung', body:'Modular terapung dengan pertanian vertikal & energi terbarukan.'},
      {id:'card2', title:'2. Transportasi Holografik', body:'Rute holografis untuk navigasi pejalan kaki & drone.'},
      {id:'card3', title:'3. Antarmuka Otak-Komputer', body:'Interaksi non-invasif untuk kontrol perangkat & input teks.'},
      {id:'card4', title:'4. Energi Fusion Mini', body:'Generator fusi skala kecil untuk listrik bersih lokal.'},
      {id:'card5', title:'5. AI Kesehatan Pribadi', body:'Agen AI yang memantau biometrik real-time & pencegahan proaktif.'}
    ];

    function drawCard(canvasId, title, body){
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext('2d');
      // background
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      // accent
      ctx.fillStyle = '#0b84ff';
      ctx.fillRect(0,0,20,canvas.height);
      // title
      ctx.fillStyle = '#111';
      ctx.font = 'bold 48px sans-serif';
      ctx.fillText(title, 40, 80);
      // body
      ctx.fillStyle = '#333';
      ctx.font = '28px sans-serif';
      wrapText(ctx, body, 40, 140, canvas.width - 80, 34);
    }

    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        const testWidth = metrics.width;
        if (testWidth > maxWidth && n > 0) {
          ctx.fillText(line, x, y);
          line = words[n] + ' ';
          y += lineHeight;
        }
        else {
          line = testLine;
        }
      }
      ctx.fillText(line, x, y);
    }

    cards.forEach((c, i) => {
      drawCard(c.id, c.title, c.body);
    });

    // connect canvases to A-Frame assets
    setTimeout(()=>{
      document.querySelector('#card1Tex')?.parentNode && null; // no-op to satisfy some linters
      // create image elements from canvases and attach to assets for plane materials
      for (let i=0;i<cards.length;i++){
        const canvas = document.getElementById(cards[i].id);
        const dataURL = canvas.toDataURL();
        const img = document.createElement('img');
        img.id = 'card' + (i+1) + 'Tex';
        img.src = dataURL;
        document.querySelector('a-assets').appendChild(img);
      }
      // hide preview hint if AR is available
      const previewEl = document.getElementById('preview');
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        previewEl.style.display = 'none';
      }
    },300);

    // Helpful note for user: if you want these cards to appear anchored to the marker,
    // replace the <a-entity id="virtual-info"> group with an <a-marker type="pattern" url="marker.patt"> and move the panels inside that marker element. 
    // Example (uncomment in HTML):
    // <a-marker type="pattern" url="marker.patt"> ...panels... </a-marker>

  </script>
</body>
</html>
